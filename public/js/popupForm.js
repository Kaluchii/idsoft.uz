$(document).ready(function(){function a(a){return regex=/[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}/gim,!regex.test(a)}function t(t){var i=!1;return $(t).each(function(){$this=$(this),""==$this.val()&&(i=!0,$this.addClass("error")),"email"!=$this.data("field-name")&&"mail"!=$this.data("field-name")||a($this.val())&&($this.addClass("error"),i=!0)}),i}function i(a,t){$(a).each(function(){$this=$(this);var a=$this.data("field-type"),i=$this.data("field-name");"bool"==a?t.bools[i]=$this.is(":checked"):"text"==a?t.textfields[i]=$this.val():"string"==a?t.stringfields[i]=$this.val():"numb"==a&&(t.numbs[i]=$this.val())})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".thank").magnificPopup({type:"inline",removalDelay:500,callbacks:{beforeOpen:function(){this.st.mainClass="mfp-zoom-in"}},midClick:!0}),$(".send-form").on("click",function(){var a=$(this).data("eventName");unical=$(this).closest(".white-popup").attr("id");var e=$(this),s={block:"fidback"};s.type_name=unical,s.stringfields={},s.textfields={},s.bools={},s.numbs={},s.images={};var n="#"+unical+" .popup-input";if(t(n))$("#"+unical+" .status-bar").addClass("show");else{i(n,s);var l=$.ajax({type:"POST",url:"/fidback/sendform",dataType:"json",data:s});e.addClass("load"),l.success(function(t){var i;$(".thank").click(),i=unical,$("#"+i+" .popup-input").each(function(){$(this).val("").removeClass("error"),$(".status-bar").removeClass("show")}),dataLayer.push({event:a}),e.removeClass("load")}),l.error(function(a){console.log(a),e.removeClass("load")})}}),$(".give-price").on("click",function(){if($this=$(this),a($(".input.mail").val()))$(".input.mail").addClass("error");else{var t={};t.mail=$(".input.mail").val();var i=$.ajax({type:"POST",url:"/send-price",dataType:"json",data:t});$this.addClass("load"),i.done(function(){$(".thank").click(),$(".input.mail").val(""),dataLayer.push({event:"gtm_submit_Get_Price_List"}),$this.removeClass("load")})}})});